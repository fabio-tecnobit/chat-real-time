{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignupPage } from './signup';\n\n@NgModule({\n  declarations: [\n    SignupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupPage),\n    ComponentsModule\n  ]\n})\nexport class SignupPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/first';\n//import { User } from './../../models/user';\nimport { AuthProvider } from './../../providers/auth/auth';\nimport { UserProvider } from './../../providers/user/user';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Loading, LoadingController, AlertController } from 'ionic-angular';\nimport { FormBuilder, FormGroup,Validators } from '@angular/forms';\n\n\n//import { AngularFireModule } from 'angularfire2';\n//import { AngularFireDatabaseModule, AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\n//import * as firebase from 'firebase/app';\n\n@IonicPage()\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html',\n})\nexport class SignupPage {\n\n  signupForm: FormGroup;\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public formBuilder: FormBuilder,\n              public userProvider:UserProvider,\n              public authProvider:AuthProvider,\n              public loadingCtrl: LoadingController,\n              public alertCtrl: AlertController\n            ) {\n\n  let emailRegex= /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      this.signupForm = this.formBuilder.group({\n        name: ['',Validators.compose([Validators.required, Validators.minLength(3)])],\n        username: ['',Validators.compose([Validators.required, Validators.minLength(3)])],\n        email: ['',Validators.compose([Validators.required, Validators.pattern(emailRegex)])],\n        password: ['',Validators.compose([Validators.required, Validators.minLength(6)])],\n      });\n  }\n  onSubmit():void{\n    let loading: Loading = this.showLoading();\n    let formUser = this.signupForm.value;  \n    let username:string  = formUser.username;\n    this.userProvider.userExists(username)\n      .first()\n      .subscribe((userExist:boolean)=>{\n          if (!userExist){\n\n            this.authProvider.createAuthUser({\n              email: formUser.email,\n              password: formUser.password\n              }).then((authState) => {\n                  console.log('usuario criado no auth');\n                  delete formUser.password;\n                  let uuid: string = authState.uid;\n                  //formUser.uid = authState.uid;\n                  this.userProvider.create(formUser,uuid)\n                  .then(()=> {\n                    //this.navCtrl.pop();      \n                    console.log('inserido na base');\n                    this.navCtrl.setRoot('HomePage')\n                    loading.dismiss();\n                  })\n                  .catch((error:any)=>{\n                    console.log(error);\n                    loading.dismiss();\n                    this.showAlert(error);\n                  });      \n              })\n              .catch((error:any)=>{\n                console.log(error);\n                loading.dismiss();\n                this.showAlert(error);\n              });\n\n          }else{\n            this.showAlert(`O usuário ${username} já está sendo usado em outra conta`);\n            loading.dismiss();\n          }\n      });\n   \n  }\n  private showLoading():Loading{\n    let loading:Loading = this.loadingCtrl.create({\n      content:'Por favor aguarde...'\n    });\n    loading.present();\n    return loading;\n  }\n  private showAlert(message:string):void{\n    this.alertCtrl.create({\n      message:message,\n      buttons:['Ok']\n    }).present();\n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}