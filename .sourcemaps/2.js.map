{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/models/message.ts","../../src/components/components.module.ts","../../src/components/custom-logged-header/custom-logged-header.ts","../../src/components/base/base.ts","../../src/components/message-box/message-box.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignupPage } from './signup';\n\n@NgModule({\n  declarations: [\n    SignupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupPage),\n    ComponentsModule\n  ]\n})\nexport class SignupPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","export class Message{\n    \n    constructor(public userId:string,\n                public text:any,\n                public timestamp:any)\n    {\n        \n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/message.ts","import { IonicModule } from 'ionic-angular';\nimport { NgModule } from '@angular/core';\n\n//import { BaseComponent } from './base/base';\nimport { CustomLoggedHeaderComponent } from './custom-logged-header/custom-logged-header';\nimport { MessageBoxComponent } from './message-box/message-box';\n@NgModule({\n\tdeclarations: [//BaseComponent,\n    CustomLoggedHeaderComponent,\n    MessageBoxComponent],\n\timports: [IonicModule],\n\texports: [//BaseComponent,\n\tCustomLoggedHeaderComponent,\n    MessageBoxComponent]\t\n})\nexport class ComponentsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { AlertController, App, MenuController } from 'ionic-angular';\nimport { AuthProvider } from './../../providers/auth/auth';\nimport { Component, Input } from '@angular/core';\nimport { BaseComponent } from \"../base/base\";\n\n@Component({\n  selector: 'custom-logged-header',\n  templateUrl: 'custom-logged-header.html'\n})\nexport class CustomLoggedHeaderComponent extends BaseComponent{\n\n  @Input() title: string;\n\n  constructor(public alertCtrl: AlertController,\n    public authProvider: AuthProvider,\n    public app:App,\n    public menuCtrl: MenuController) {\n      super(alertCtrl,authProvider,app,menuCtrl);\n    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/custom-logged-header/custom-logged-header.ts","import { OnInit } from '@angular/core';\nimport { AuthProvider } from './../../providers/auth/auth';\nimport { NavController, AlertController, MenuController, App } from 'ionic-angular';\n//import { Component } from '@angular/core';\n\n//@Component({})\nexport abstract class BaseComponent implements OnInit {\n\n  protected navCtrl:NavController;\n\n  constructor(public alertCtrl: AlertController,\n              public authProvider: AuthProvider,\n              public app:App,\n              public menuCtrl: MenuController) {\n    \n  }\n  ngOnInit():void{\n    this.navCtrl = this.app.getActiveNav();\n  }\n  onLogout():void{\n    console.log('on Logout');\n    this.alertCtrl.create({\n      message: 'Você deseja sair?',\n      buttons:[{\n        text:'Sim',\n        handler:()=>{\n          this.authProvider.logout()\n          .then(()=>{\n            this.navCtrl.setRoot('SigninPage');\n          });\n        }\n      },{\n        text:'Não'\n      }]\n    }).present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/base/base.ts","import { Message } from './../../models/message';\nimport { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'message-box',\n  templateUrl: 'message-box.html',\n  host:{\n    '[style.justify-content]': '((!isFromSender) ? \"flex-start\" : \"flex-end\")',\n    '[style.text-align]': '((!isFromSender) ? \"left\" : \"right\")'\n  }\n})\nexport class MessageBoxComponent {\n\n  @Input() message: Message;\n  @Input() isFromSender: boolean;\n\n  constructor() {\n    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/message-box/message-box.ts","import { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/first';\nimport { User } from './../../models/user';\nimport { AuthProvider } from './../../providers/auth/auth';\nimport { UserProvider } from './../../providers/user/user';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Loading, LoadingController, AlertController } from 'ionic-angular';\nimport { FormBuilder, FormGroup,Validators } from '@angular/forms';\n\n\nimport { AngularFireModule } from 'angularfire2';\nimport { AngularFireDatabaseModule, AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\n//import * as firebase from 'firebase/app';\n\n@IonicPage()\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html',\n})\nexport class SignupPage {\n\n  signupForm: FormGroup;\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public formBuilder: FormBuilder,\n              public userProvider:UserProvider,\n              public authProvider:AuthProvider,\n              public loadingCtrl: LoadingController,\n              public alertCtrl: AlertController\n            ) {\n\n  let emailRegex= /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      this.signupForm = this.formBuilder.group({\n        name: ['',Validators.compose([Validators.required, Validators.minLength(3)])],\n        username: ['',Validators.compose([Validators.required, Validators.minLength(3)])],\n        email: ['',Validators.compose([Validators.required, Validators.pattern(emailRegex)])],\n        password: ['',Validators.compose([Validators.required, Validators.minLength(6)])],\n      });\n  }\n  onSubmit():void{\n    let loading: Loading = this.showLoading();\n    let formUser = this.signupForm.value;  \n    let username:string  = formUser.username;\n    this.userProvider.userExists(username)\n      .first()\n      .subscribe((userExist:boolean)=>{\n          if (!userExist){\n\n            this.authProvider.createAuthUser({\n              email: formUser.email,\n              password: formUser.password\n              }).then((authState) => {\n                  console.log('usuario criado no auth');\n                  delete formUser.password;\n                  let uuid: string = authState.uid;\n                  //formUser.uid = authState.uid;\n                  this.userProvider.create(formUser,uuid)\n                  .then(()=> {\n                    //this.navCtrl.pop();      \n                    console.log('inserido na base');\n                    this.navCtrl.setRoot('HomePage')\n                    loading.dismiss();\n                  })\n                  .catch((error:any)=>{\n                    console.log(error);\n                    loading.dismiss();\n                    this.showAlert(error);\n                  });      \n              })\n              .catch((error:any)=>{\n                console.log(error);\n                loading.dismiss();\n                this.showAlert(error);\n              });\n\n          }else{\n            this.showAlert(`O usuário ${username} já está sendo usado em outra conta`);\n            loading.dismiss();\n          }\n      });\n   \n  }\n  private showLoading():Loading{\n    let loading:Loading = this.loadingCtrl.create({\n      content:'Por favor aguarde...'\n    });\n    loading.present();\n    return loading;\n  }\n  private showAlert(message:string):void{\n    this.alertCtrl.create({\n      message:message,\n      buttons:['Ok']\n    }).present();\n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}